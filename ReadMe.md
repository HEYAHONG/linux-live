# [原版说明](README)

# [许可](DOC/LICENSE)

# 说明

Linux Live一般指无需安装，可直接运行的Linux运行方式，类似于Windows PE的运行方式，一般安装在USB存储设备上，不影响原有硬盘系统。

此工具可将正在运行的Linux系统打包成Linux Live系统。

# 运行模式

## 传统模式

传统模式跟各种Linux的安装光盘一样，启动后squashfs仍然放在原启动介质，原启动介质不可移除。

要使用此模式，不得添加其它模式的内核启动参数。

## 持久存储模式

此模式与传统模式的区别在于，对系统的修改（将统一放在一个目录中，称为更改目录(changes)）将被保存在存储介质（如USB存储介质）上。

需要在内核启动参数中添加`perch`。

运行此模式时推荐将系统放在Linux支持较好的文件系统中（如Ext2/Ext3/Ext4），有些文件系统(如NTFS)虽然能够在其它模式启动却不一定能在此模式下工作。

此模式可用于制作系统模块，默认情况下，打包后的系统中仅有少数模块(一般只有一个核心模块)，若不想重新打包，可将现有对更改目录中根文件系统打包成模块文件（使用mksquashfs命令）放入模块目录(modules),再进行发布，这样更改就会在下一次启动时被加载（ 此时可删除原更改目录）。

此模式下，系统相当于是一个带还原的Linux系统，删除更改目录即可还原系统。

## 纯内存模式

所有文件都在内存中。通常适用于从网络启动。

需要在内核启动参数中添加`toram`。

此模式的优点是启动后无需任何存储介质，原启动介质可移除。

现在PC的内存越来越大（如8G、16G、32G），完全可以使用此方式将系统完全加载至内存提高速度。

此模式下，对系统的任何更改都不会影响到原系统（如果没有手动挂载某些磁盘）,即使某些破坏操作(如`sudo rm -rf /`)都不会删除硬盘上的任何文件。

# 使用步骤

## 前期准备

- 安装需要打包的软件。
- 清理系统中不需要的文件（如对于Debian系而言的apt缓存）。
- 下载本源代码（推荐下载至根目录，这样本源代码就不会被打包至Linux Live中）。

## 打包

- 修改[config](config)，根据自己的需要定制设置。注意：此文件不仅在打包时使用，也会打包在Linux Live系统中，因此，对变量的使用要考虑不同的环境。
- 运行build脚本。
- 根据build脚本的提示生成最终的文件(iso镜像文件/zip文件)。

## 使用

- 见最终打包文件的[readme.txt](bootinfo.txt).
- 其核心为vmlinuz与initrfs.img文件，这两个文件可用于第一阶段的加载,第一阶段加载完成后，可通过多种方式(如网络启动)加载打包的系统。
- 可通过`mksquashfs`打包新的模块放入模块目录（modules），在下一次启动时，新模块的文件将加载至根文件系统。

# 脚本说明

- [build](build):打包当前系统。
- [configure](configure):生成适合当前系统的推荐配置（默认文件名为config.tmp,用户可自行选择是否替换原config），现适用于ubuntu(24.04及更新版本)。

# 相关链接

- linux-live:[https://www.linux-live.org](https://www.linux-live.org)
- slax:[https://www.slax.org/](https://www.slax.org/)
